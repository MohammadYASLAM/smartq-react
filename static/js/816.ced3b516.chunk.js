"use strict";(self.webpackChunksmartq_react=self.webpackChunksmartq_react||[]).push([[816],{82:(e,t,a)=>{a.a(e,(async(e,s)=>{try{a.d(t,{db:()=>m,j2:()=>c});var r=a(11),u=a(726),i=a(717),n=a(214),o=e([r,u,i,n]);[r,u,i,n]=o.then?(await o)():o;const d={apiKey:"AIzaSyAhBlyXYwfLE1rXPcWRiouJfsp6gIpG894",authDomain:"smartq-d015b.firebaseapp.com",projectId:"smartq-d015b",storageBucket:"smartq-d015b.firebasestorage.app",messagingSenderId:"452644823738",appId:"1:452644823738:web:7a133f086ff93200b39883"},l=(0,r.initializeApp)(d),c=(0,u.getAuth)(l),m=(0,i.getFirestore)(l),p=(0,n.getMessaging)(l);(0,n.onMessage)(p,(e=>{console.log("Message received:",e),alert(`Notification: ${e.notification.title} - ${e.notification.body}`)})),s()}catch(d){s(d)}}))},816:(e,t,a)=>{a.a(e,(async(e,s)=>{try{a.r(t),a.d(t,{default:()=>l});var r=a(43),u=a(662),i=a(82),n=a(717),o=a(579),d=e([i,n]);[i,n]=d.then?(await d)():d;const l=()=>{const[e,t]=(0,r.useState)(""),[a,s]=(0,r.useState)(0),[d,l]=(0,r.useState)(0),[c,m]=(0,r.useState)(""),[p,g]=(0,r.useState)({name:"",email:""}),[h,f]=(0,r.useState)(!0),[y,q]=(0,r.useState)(null),x=(0,u.zy)(),b=(0,u.Zp)(),v=new URLSearchParams(x.search).get("queueId");(0,r.useEffect)((()=>{(async()=>{if(v){try{const e=(0,n.doc)(i.db,"queues",v),a=await(0,n.getDoc)(e);if(!a.exists())return void b("/invalid-queue");const r=a.data();if("active"!==r.status)return void b("/queue-paused");q(r),t(r.name||"Queue"),s(r.users?r.users.length:0),l(r.estimatedWaitTime||0)}catch(e){console.error("Error loading queue details:",e),m("Error loading queue details.")}f(!1)}else b("/invalid-queue")})()}),[v,b]);return h?(0,o.jsx)("p",{children:"Loading queue details..."}):(0,o.jsxs)("div",{className:"queue-status",style:{maxWidth:"400px",margin:"0 auto",padding:"1rem"},children:[(0,o.jsxs)("h2",{children:[e," - Join the Queue"]}),(0,o.jsxs)("p",{children:["Current number in queue: ",a]}),(0,o.jsxs)("p",{children:["Estimated wait time: ",d," minutes"]}),c&&(0,o.jsx)("p",{style:{color:"red"},children:c}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const{name:t,email:a}=p;if(!t||!a)return;const s=a;if(y&&"active"!==y.status)return void b("/queue-paused");if(y&&y.users&&y.users.find((e=>e.userId===s)))return alert("You are already in the queue."),void b(`/queue-status?queueId=${v}&userId=${encodeURIComponent(s)}`);const r=y.users&&y.users.length||0,u={userId:s,name:t,email:a,position:r};try{const e=(0,n.doc)(i.db,"queues",v);await(0,n.updateDoc)(e,{users:(0,n.arrayUnion)(u)}),b(`/queue-status?queueId=${v}&userId=${encodeURIComponent(s)}`)}catch(o){console.error("Error joining queue:",o),m("Error joining queue. Please try again later.")}},style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,o.jsx)("input",{type:"text",placeholder:"Enter your name",value:p.name,onChange:e=>g({...p,name:e.target.value}),required:!0,style:{padding:"0.5rem",fontSize:"16px"}}),(0,o.jsx)("input",{type:"email",placeholder:"Enter your email",value:p.email,onChange:e=>g({...p,email:e.target.value}),required:!0,style:{padding:"0.5rem",fontSize:"16px"}}),(0,o.jsx)("button",{type:"submit",className:"btn",style:{padding:"0.75rem",fontSize:"16px"},children:"Join Queue"})]})]})};s()}catch(l){s(l)}}))}}]);
//# sourceMappingURL=816.ced3b516.chunk.js.map