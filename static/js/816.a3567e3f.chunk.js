"use strict";(self.webpackChunksmartq_react=self.webpackChunksmartq_react||[]).push([[816],{82:(e,t,a)=>{a.a(e,(async(e,s)=>{try{a.d(t,{db:()=>p,j2:()=>c});var r=a(11),n=a(726),u=a(717),i=a(214),o=e([r,n,u,i]);[r,n,u,i]=o.then?(await o)():o;const d={apiKey:"AIzaSyAhBlyXYwfLE1rXPcWRiouJfsp6gIpG894",authDomain:"smartq-d015b.firebaseapp.com",projectId:"smartq-d015b",storageBucket:"smartq-d015b.firebasestorage.app",messagingSenderId:"452644823738",appId:"1:452644823738:web:7a133f086ff93200b39883"},l=(0,r.initializeApp)(d),c=(0,n.getAuth)(l),p=(0,u.getFirestore)(l),m=(0,i.getMessaging)(l);(0,i.onMessage)(m,(e=>{console.log("Message received:",e),alert(`Notification: ${e.notification.title} - ${e.notification.body}`)})),s()}catch(d){s(d)}}))},816:(e,t,a)=>{a.a(e,(async(e,s)=>{try{a.r(t),a.d(t,{default:()=>l});var r=a(43),n=a(662),u=a(82),i=a(717),o=a(579),d=e([u,i]);[u,i]=d.then?(await d)():d;const l=()=>{const[e,t]=(0,r.useState)(""),[a,s]=(0,r.useState)(0),[d,l]=(0,r.useState)(0),[c,p]=(0,r.useState)(""),[m,g]=(0,r.useState)({name:"",email:""}),[h,f]=(0,r.useState)(!0),[q,y]=(0,r.useState)(null),x=(0,n.zy)(),b=(0,n.Zp)(),v=new URLSearchParams(x.search).get("queueId");(0,r.useEffect)((()=>{if(!v)return void b("/invalid-queue");const e=(0,i.doc)(u.db,"queues",v),a=(0,i.onSnapshot)(e,(e=>{if(!e.exists())return void b("/invalid-queue");const a=e.data();if("active"!==a.status)return void b("/queue-paused");y(a),t(a.name||"Queue");const r=a.users?a.users.length:0;s(r),l(5*r),f(!1)}),(e=>{console.error("Error listening to queue:",e),p("Error loading queue details."),f(!1)}));return()=>a()}),[v,b,5]);return h?(0,o.jsx)("p",{children:"Loading queue details..."}):(0,o.jsxs)("div",{className:"queue-status",style:{maxWidth:"400px",margin:"0 auto",padding:"1rem",textAlign:"center"},children:[(0,o.jsxs)("h2",{children:[e," - Join the Queue"]}),(0,o.jsxs)("p",{children:["Current number in queue: ",a]}),(0,o.jsxs)("p",{children:["Estimated wait time: ",d," minutes"]}),c&&(0,o.jsx)("p",{style:{color:"red"},children:c}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const{name:t,email:a}=m;if(!t||!a)return;const s=a;if(q&&"active"!==q.status)return void b("/queue-paused");if(q&&q.users&&q.users.find((e=>e.userId===s)))return alert("You are already in the queue."),void b(`/queue-status?queueId=${v}&userId=${encodeURIComponent(s)}`);const r=q.users&&q.users.length||0,n={userId:s,name:t,email:a,position:r};try{const e=(0,i.doc)(u.db,"queues",v);await(0,i.updateDoc)(e,{users:(0,i.arrayUnion)(n)}),b(`/queue-status?queueId=${v}&userId=${encodeURIComponent(s)}`)}catch(o){console.error("Error joining queue:",o),p("Error joining queue. Please try again later.")}},style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,o.jsx)("input",{type:"text",placeholder:"Enter your name",value:m.name,onChange:e=>g({...m,name:e.target.value}),required:!0,style:{padding:"0.5rem",fontSize:"16px"}}),(0,o.jsx)("input",{type:"email",placeholder:"Enter your email",value:m.email,onChange:e=>g({...m,email:e.target.value}),required:!0,style:{padding:"0.5rem",fontSize:"16px"}}),(0,o.jsx)("button",{type:"submit",className:"btn",style:{padding:"0.75rem",fontSize:"16px"},children:"Join Queue"})]})]})};s()}catch(l){s(l)}}))}}]);
//# sourceMappingURL=816.a3567e3f.chunk.js.map