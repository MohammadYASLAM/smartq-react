"use strict";(self.webpackChunksmartq_react=self.webpackChunksmartq_react||[]).push([[102],{82:(e,t,s)=>{s.a(e,(async(e,a)=>{try{s.d(t,{db:()=>p,j2:()=>l});var i=s(11),u=s(726),n=s(717),r=s(214),o=e([i,u,n,r]);[i,u,n,r]=o.then?(await o)():o;const d={apiKey:"AIzaSyAhBlyXYwfLE1rXPcWRiouJfsp6gIpG894",authDomain:"smartq-d015b.firebaseapp.com",projectId:"smartq-d015b",storageBucket:"smartq-d015b.firebasestorage.app",messagingSenderId:"452644823738",appId:"1:452644823738:web:7a133f086ff93200b39883"},c=(0,i.initializeApp)(d),l=(0,u.getAuth)(c),p=(0,n.getFirestore)(c),h=(0,r.getMessaging)(c);(0,r.onMessage)(h,(e=>{console.log("Message received:",e),alert(`Notification: ${e.notification.title} - ${e.notification.body}`)})),a()}catch(d){a(d)}}))},102:(e,t,s)=>{s.a(e,(async(e,a)=>{try{s.r(t),s.d(t,{default:()=>c});var i=s(43),u=s(662),n=s(82),r=s(717),o=s(579),d=e([n,r]);[n,r]=d.then?(await d)():d;const c=()=>{const[e,t]=(0,i.useState)("--"),[s,a]=(0,i.useState)("--"),[d,c]=(0,i.useState)("Loading..."),[l,p]=(0,i.useState)(!1),[h,m]=(0,i.useState)(!1),[f]=(0,u.ok)(),g=f.get("queueId"),b=f.get("userId"),q=(0,u.Zp)();(0,i.useEffect)((()=>{if(!b)return void q(`/join-queue?queueId=${g}`);const e=(0,r.doc)(n.db,"queues",g),s=(0,r.onSnapshot)(e,(e=>{if(!e.exists())return alert("Queue has been removed."),void q("/invalid-queue");const s=e.data(),i=s.users?s.users.find((e=>e.userId===b)):null;i?(c(`Welcome ${i.name} (${i.email})`),t(i.position),a(s.estimatedWaitTime),0===i.position?(m(!0),l||(p(!0),alert("It's your turn now!"))):m(!1)):h&&q("/farewell")}));return()=>s()}),[g,b,q,l,h]);return(0,o.jsxs)("div",{className:"queue-status",children:[(0,o.jsx)("div",{id:"welcomeMessage",children:d}),(0,o.jsx)("h2",{children:"Queue Status"}),(0,o.jsxs)("div",{className:"position-display",children:[(0,o.jsx)("h2",{children:h?"It's your turn!":"Your Position"}),(0,o.jsx)("div",{className:"position-number",children:e})]}),(0,o.jsxs)("p",{children:["Estimated wait time: ",s," minutes"]}),(0,o.jsx)("button",{id:"leaveQueueBtn",className:"btn",onClick:async()=>{const e=(0,r.doc)(n.db,"queues",g),t=await(0,r.getDoc)(e);if(!t.exists())return;let s=t.data().users.filter((e=>e.userId!==b));s=s.map(((e,t)=>({...e,position:t}))),await(0,r.updateDoc)(e,{users:s}),alert("You have left the queue."),q(h?"/farewell":`/join-queue?queueId=${g}`)},children:"Leave Queue"})]})};a()}catch(c){a(c)}}))}}]);
//# sourceMappingURL=102.001fdd16.chunk.js.map